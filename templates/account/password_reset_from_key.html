{% extends "base.html" %}
{% load i18n %}

{% block title %}
  {% if token_fail %}
    {% trans "Invalid link" %}
  {% else %}
    {% trans "Create new password" %}
  {% endif %}
{% endblock %}

{% block content %}
<div class="auth-bg">
  <div class="auth-card">
    {% if token_fail %}
      <h1 class="auth-title">{% trans "Invalid link" %}</h1>
      <p class="auth-sub">
        {% trans "The link to reset your password is invalid or has already been used." %}
      </p>
      <a class="link" href="{% url 'account_reset_password' %}">
        {% trans "Request a new one" %}
      </a>
    {% else %}
      <h1 class="auth-title">{% trans "Create new password" %}</h1>
      <form method="post" action="{{ action_url }}">
        {% csrf_token %}
        <div class="form-row">
          <label for="id_password1">{% trans "New password" %}</label>
          {{ form.password1 }}
          {% if form.password1.errors %}
            <div class="error-inline">{{ form.password1.errors.0 }}</div>
          {% endif %}
        </div>
        <div class="form-row">
          <label for="id_password2">{% trans "Confirm password" %}</label>
          {{ form.password2 }}
          {% if form.password2.errors %}
            <div class="error-inline">{{ form.password2.errors.0 }}</div>
          {% endif %}
        </div>
        <button class="btn btn-primary" type="submit">
          {% trans "Save new password" %}
        </button>
      </form>
    {% endif %}
  </div>
</div>
{% endblock %}
